<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ejercicio Psicol√≥gico Completo</title>
    <style>
        /* ESTILOS GENERALES */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', sans-serif;
            background: #f5f7fa;
        }

        .search-container {
            padding: 20px;
            background: #ffffff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .search-box {
            width: 100%;
            padding: 15px;
            border: 2px solid #4CAF50;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s;
        }

        .search-box:focus {
            border-color: #45a049;
            box-shadow: 0 0 10px rgba(76,175,80,0.3);
        }

        .container {
            display: flex;
            gap: 20px;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* PANELES */
        .selection-panel, .selected-panel {
            flex: 1;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 15px;
            max-height: 80vh;
            overflow-y: auto;
        }

        /* CATEGOR√çAS */
        .category-group {
            margin-bottom: 25px;
        }

        .category-header {
            background: #4CAF50;
            color: white;
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
            transition: all 0.3s;
        }

        .category-header:hover {
            background: #45a049;
        }

        .trait-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 5px;
            margin-left: 10px;
        }

        .trait-item {
            padding: 10px;
            margin: 3px;
            background: #f8f9fa;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #eee;
        }

        .trait-item:hover {
            background: #e3f2fd;
            transform: translateX(5px);
        }

        /* ELEMENTOS SELECCIONADOS */
        .selected-item {
            background: #f0fff4;
            padding: 12px;
            margin: 8px 0;
            border-left: 4px solid #4CAF50;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .btn-eliminar {
            background: none;
            border: none;
            color: #ff4444;
            cursor: pointer;
            font-weight: bold;
            padding: 5px;
        }

        /* ESTADOS */
        .hidden {
            display: none;
        }

        .highlight {
            background: #fff3cd !important;
            border-color: #ffd700 !important;
        }

        /* RESPONSIVO */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .selection-panel, .selected-panel {
                max-height: 50vh;
            }
        }
    </style>
</head>
<body>
    <div class="search-container">
        <input type="text" id="searchInput" class="search-box" placeholder="üîç Buscar rasgos (ej: creatividad, manipulaci√≥n...)">
    </div>

    <div class="container">
        <!-- Panel de Selecci√≥n -->
        <div class="selection-panel">
            <h2>Virtudes</h2>
            <div class="category-group" id="virtudes"></div>
            <h2>Defectos</h2>
            <div class="category-group" id="defectos"></div>
        </div>

        <!-- Panel de Seleccionados -->
        <div class="selected-panel">
            <h3>Tus Rasgos Seleccionados</h3>
            <div id="selected-items"></div>
        </div>
    </div>

    <script>
        // DATOS COMPLETOS
        const categorias = {
            Virtudes: {
                "Intelectuales": {
                    "Pensamiento Cr√≠tico": ["An√°lisis objetivo", "Escepticismo saludable", "Evaluaci√≥n de fuentes"],
                    "Creatividad": ["Pensamiento divergente", "Originalidad", "Soluci√≥n innovadora"],
                    "Aprendizaje": ["Curiosidad epistemol√≥gica", "Asimilaci√≥n r√°pida", "S√≠ntesis conceptual"]
                },
                "Emocionales": {
                    "Regulaci√≥n": ["Ecuanimidad", "Tolerancia a la frustraci√≥n", "Modulaci√≥n afectiva"],
                    "Autoconocimiento": ["Conciencia de sesgos", "Reconocimiento de triggers", "Mapa emocional"]
                },
                "Sociales": {
                    "Habilidades": ["Diplomacia asertiva", "Inteligencia social", "Gesti√≥n de conflictos"],
                    "Empat√≠a": ["Comprensi√≥n contextual", "Escucha activa", "Perspectiva m√∫ltiple"]
                }
            },
            Defectos: {
                "Cognitivos": {
                    "Sesgos": ["Pensamiento dicot√≥mico", "Generalizaci√≥n excesiva", "Razonamiento emocional"],
                    "Rigidez": ["Dogmatismo", "Resistencia al cambio", "Mente cerrada"]
                },
                "Emocionales": {
                    "Desregulaci√≥n": ["Impulsividad", "Labilidad emocional", "Anestesia afectiva"],
                    "Negatividad": ["Cinismo cr√≥nico", "Catastrofismo", "Victimismo"]
                },
                "Sociales": {
                    "Relaciones T√≥xicas": ["Manipulaci√≥n", "Pasivo-agresividad", "Triangulaci√≥n"],
                    "Aislamiento": ["Misantrop√≠a", "Fobia social", "Autosabotaje relacional"]
                }
            }
        };

        let seleccionados = new Set();

        // FUNCIONALIDAD PRINCIPAL
        function crearSelector() {
            Object.entries(categorias).forEach(([tipo, grupos]) => {
                const contenedor = document.getElementById(tipo.toLowerCase());
                
                Object.entries(grupos).forEach(([categoria, subgrupos]) => {
                    const categoriaDiv = document.createElement('div');
                    
                    // Encabezado de categor√≠a
                    const header = document.createElement('div');
                    header.className = 'category-header';
                    header.innerHTML = `
                        ${categoria}
                        <span class="toggle-icon">‚ñº</span>
                    `;
                    
                    // Lista de rasgos
                    const lista = document.createElement('div');
                    lista.className = 'trait-list';
                    
                    Object.entries(subgrupos).forEach(([subcategoria, rasgos]) => {
                        rasgos.forEach(rasgo => {
                            const item = document.createElement('div');
                            item.className = 'trait-item';
                            item.textContent = rasgo;
                            item.onclick = () => toggleSeleccion(rasgo, tipo);
                            lista.appendChild(item);
                        });
                    });

                    header.onclick = () => lista.classList.toggle('hidden');
                    categoriaDiv.appendChild(header);
                    categoriaDiv.appendChild(lista);
                    contenedor.appendChild(categoriaDiv);
                });
            });
        }

        function toggleSeleccion(rasgo, tipo) {
            const id = `${tipo}-${rasgo}`;
            seleccionados.has(id) ? seleccionados.delete(id) : seleccionados.add(id);
            actualizarSeleccionados();
        }

        function actualizarSeleccionados() {
            const contenedor = document.getElementById('selected-items');
            contenedor.innerHTML = '';
            
            seleccionados.forEach(id => {
                const [tipo, rasgo] = id.split('-');
                const div = document.createElement('div');
                div.className = 'selected-item';
                div.innerHTML = `
                    <div>
                        <strong>${rasgo}</strong>
                        <small>(${tipo})</small>
                    </div>
                    <button class="btn-eliminar" title="Eliminar">√ó</button>
                `;
                div.querySelector('button').onclick = () => {
                    seleccionados.delete(id);
                    actualizarSeleccionados();
                };
                contenedor.appendChild(div);
            });
        }

        // B√öSQUEDA
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const termino = e.target.value.toLowerCase();
            
            document.querySelectorAll('.trait-item').forEach(item => {
                const texto = item.textContent.toLowerCase();
                const coincide = texto.includes(termino);
                item.style.display = coincide ? 'block' : 'none';
                item.classList.toggle('highlight', coincide && termino.length > 0);
            });
        });

        // INICIALIZACI√ìN
        window.onload = crearSelector;
    </script>
</body>
</html>